import logging
from aiogram import Bot, Dispatcher, F
from aiogram.types import Message, CallbackQuery
from aiogram.filters import Command
from aiogram.utils.keyboard import InlineKeyboardBuilder
import random

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging.basicConfig(level=logging.INFO)

# –£–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
API_TOKEN = "7952594519:AAGt2FyMf2oHACUNFbLkH-dgeXd1JF3UOFU"

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=API_TOKEN)
dp = Dispatcher()

# –®—É—Ç–∫–∏ –¥–ª—è –±–æ—Ç–∞
jokes = [
    "–°–∞–º—É—Ä–∞–π –∑–∞—Ö–æ–¥–∏—Ç –≤ –±–∞—Ä... –∏ –±–∞—Ä –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –¥–æ–¥–∑—ë ü•ã",
    "–ü–æ—á–µ–º—É —Å–∞–º—É—Ä–∞–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç? –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω —Ä–µ–∂–µ—Ç –≤—Ä–µ–º—è –∫–∞—Ç–∞–Ω–æ–π! ‚è≥",
    "–°–∞–º—É—Ä–∞–π ‚Äì —ç—Ç–æ –Ω–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è, —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥—É—à–∏ üßò‚Äç‚ôÇÔ∏è",
    "- –ù–∞–¥ —Å–∞–º—É—Ä–∞—è–º–∏, –∏–≥—Ä–∞—é—â–∏–º–∏ –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã, –≤–∏—Å–∏—Ç —Å–º–µ—Ä—Ç–µ–ª—å–Ω–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å.- –ù–µ—É–∂–µ–ª–∏? –° —á–µ–≥–æ –≤—ã —ç—Ç–æ –≤–∑—è–ª–∏, —Å—ç—Ä?- –ù—É –∫–∞–∫ –∂–µ. –ü–æ —Å–∞–º—É—Ä–∞–π—Å–∫–∏–º –ø—Ä–∞–≤–∏–ª–∞–º, –µ—Å–ª–∏ —Å–∞–º—É—Ä–∞–π —Ç–µ—Ä–ø–∏—Ç –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, –æ–Ω –æ–±—è–∑–∞–Ω —Å–¥–µ–ª–∞—Ç—å —Å–µ–±–µ —Ö–∞—Ä–∞–∫–∏—Ä–∏.",
    "–ú–µ—Å—Ç—å - —ç—Ç–æ –±–ª—é–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –≤ —Ç–∞–ø–∫–∏.(–ò–∑ –∫–æ–¥–µ–∫—Å–∞ –∫–æ—Ç–æ–≤-—Å–∞–º—É—Ä–∞–µ–≤)",
    "–ü–∏–≤–æ " + '–°–∞–º—É—Ä–∞–π' + "! –¢—Ä–∏ –±—É—Ç—ã–ª–∫–∏ –≤–µ—á–µ—Ä–æ–º –∏ –Ω–∞ —É—Ç—Ä–æ –≤–∞—Å –Ω–µ –æ—Ç–ª–∏—á–∏—à—å –æ—Ç —è–ø–æ–Ω—Ü–∞!",
    "–ï—Å–ª–∏ –æ–ø–æ–∑–æ—Ä–∏—Ç—Å—è —è–ø–æ–Ω—Å–∫–∏–π —Å–∞–º—É—Ä–∞–π - –æ–Ω —É–±—å–µ—Ç —Å–µ–±—è.–ï—Å–ª–∏ –æ–ø–æ–∑–æ—Ä–∏—Ç—Å—è —Ä—É—Å—Å–∫–∏–π —Å–∞–º—É—Ä–∞–π - –æ–Ω —É–±—å–µ—Ç —Ç–æ–≥–æ, –∫—Ç–æ –±—É–¥–µ—Ç –Ω–∞–¥ –Ω–∏–º —Å–º–µ—è—Ç—å—Å—è.",
    "–°–∞–º—É—Ä–∞–π –Ω–µ –Ω–æ—Å–∏—Ç –∑–æ–Ω—Ç ‚Äì –¥–æ–∂–¥—å —É–≤–∞–∂–∞–µ—Ç –µ–≥–æ —á–µ—Å—Ç—å –∏ –æ–±—Ö–æ–¥–∏—Ç —Å—Ç–æ—Ä–æ–Ω–æ–π.",
    "–î–∞–∂–µ —á–∞–π –≤ —Ä—É–∫–∞—Ö —Å–∞–º—É—Ä–∞—è –∑–∞–≤–∞—Ä–∏–≤–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ ‚Äì –∏–∑ —Å—Ç—Ä–∞—Ö–∞ –ø–µ—Ä–µ–¥ –∫–∞—Ç–∞–Ω–æ–π.",
    "–°–∞–º—É—Ä–∞–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–±—ã–≤–∞–µ—Ç ‚Äì —É –Ω–µ–≥–æ –ø–∞–º—è—Ç—å –Ω–∞—Ç–æ—á–µ–Ω–∞!",
    "–í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–ø–æ—Ä–∞—Ö —Å–∞–º—É—Ä–∞–π —Ä–µ–∂–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ–ø–æ–ª–∞–º.",
    "–°–∞–º—É—Ä–∞–π—Å–∫–∏–π GPS –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –ø—É—Ç—å —á–µ—Ä–µ–∑ –¥–æ–¥–∑—ë.",
    "–°–∞–º—É—Ä–∞–π –Ω–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –≤ —à–∞—Ö–º–∞—Ç—ã ‚Äì –æ–Ω —Ä—É–±–∏—Ç –¥–æ—Å–∫—É.",
    "–£ —Å–∞–º—É—Ä–∞—è –Ω–µ—Ç –±—É–¥–∏–ª—å–Ω–∏–∫–∞ ‚Äì –æ–Ω –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è, –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Å–æ–ª–Ω—Ü–µ –±–æ–∏—Ç—Å—è –æ–ø–æ–∑–¥–∞—Ç—å.",
    "–°–∞–º—É—Ä–∞–π –Ω–µ –æ—Ç–ø—É—Å–∫–∞–µ—Ç –±–æ—Ä–æ–¥—É ‚Äì —É –∫–∞—Ç–∞–Ω—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å—Ç–∞—è —Ä–∞–±–æ—Ç–∞.",
    "–ï—Å–ª–∏ —Å–∞–º—É—Ä–∞–π —Å–∞–¥–∏—Ç—Å—è –∑–∞ —Ä—É–ª—å, —Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è —Å–∞–º–∏ –∫–ª–∞–Ω—è—é—Ç—Å—è –µ–º—É.",
    "–°–∞–º—É—Ä–∞–π –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç –¥–≤–∞–∂–¥—ã ‚Äì –µ–≥–æ —Å–ª–æ–≤–æ —Ä–µ–∂–µ—Ç —Ç–∏—à–∏–Ω—É –Ω–∞–ø–æ–ø–æ–ª–∞–º.",
]

# –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
ban_keywords = ["—à–ª—é—Ö–∞", "—Å–ø–∞–º", "—Ä–µ–∫–ª–∞–º–∞", "–ø–æ—Ä–Ω–æ", "–±–æ—Ç"]

# --- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ---

# –°—Ç–∞—Ä—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
@dp.message(Command("start"))
async def cmd_start(message: Message):
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, –≤–æ–∏–Ω! ü•∑\n"
        "–Ø —Å–∞–º—É—Ä–∞–π—Å–∫–∏–π –±–æ—Ç –∏ –≥–æ—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ —á–∞—Ç–µ.\n"
        "–í–≤–µ–¥–∏ /help, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —è —É–º–µ—é."
    )

# –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
@dp.message(Command("help"))
async def cmd_help(message: Message):
    await message.answer(
        "–í–æ—Ç —á—Ç–æ —è –º–æ–≥—É:\n"
        "/start - –ù–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ\n"
        "/joke - –†–∞—Å—Å–∫–∞–∑–∞—Ç—å —Å–∞–º—É—Ä–∞–π—Å–∫—É—é —à—É—Ç–∫—É\n"
        "/clean - –£–¥–∞–ª–∏—Ç—å —Å–ø–∞–º\n"
        "/menu - –û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π"
    )

# –®—É—Ç–∫–∞
@dp.message(Command("joke"))
async def cmd_joke(message: Message):
    await message.answer(random.choice(jokes))

# –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
@dp.message(F.text)
async def filter_spam(message: Message):
    if any(word in message.text.lower() for word in ban_keywords):
        await message.delete()
        await message.answer(
            f"–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç @{message.from_user.username} –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ. üõ°Ô∏è\n"
            "–í —á–∞—Ç–µ –∑–∞–ø—Ä–µ—â–µ–Ω—ã –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞!"
        )

# –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π
@dp.message(Command("menu"))
async def cmd_menu(message: Message):
    keyboard = InlineKeyboardBuilder()
    keyboard.button(text="–®—É—Ç–∫–∞", callback_data="joke")
    keyboard.button(text="–ß–∏—Å—Ç–∫–∞", callback_data="clean")
    keyboard.adjust(2)
    await message.answer("–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=keyboard.as_markup())

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
@dp.callback_query(F.data == "joke")
async def callback_joke(callback: CallbackQuery):
    await callback.message.answer(random.choice(jokes))
    await callback.answer()

@dp.callback_query(F.data == "clean")
async def callback_clean(callback: CallbackQuery):
    await callback.message.answer("–ß–∏—Å—Ç–æ—Ç–∞ –≤ —á–∞—Ç–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∞! üßπ")
    await callback.answer()

# --- –ó–∞–ø—É—Å–∫ ---

if __name__ == "__main__":
    dp.run_polling(bot)
